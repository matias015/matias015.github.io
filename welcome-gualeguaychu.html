<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bienvenido | Casino Gualeguaych√∫</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Theme Overrides for Welcome Page - Blue Brand */
        :root {
            --primary-color: #169ad6; /* Blue */
            --primary-hover: #117aab;
            --shadow-gold: 0 4px 20px rgba(22, 154, 214, 0.2);
        }

        .welcome-hero {
            height: 60vh;
            min-height: 400px;
            /* Background set via JS from info.json */
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            align-items: flex-end;
            padding-bottom: 4rem;
        }
        
        .welcome-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(0deg, #050505 0%, rgba(5,5,5,0.4) 100%);
        }

        .welcome-content {
            position: relative;
            z-index: 2;
            width: 100%;
        }

        .stats-bar {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(10px);
            border-top: 1px solid var(--primary-color);
            border-bottom: 1px solid var(--primary-color);
            padding: 2rem 0;
            margin-top: -3rem;
            position: relative;
            z-index: 3;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            text-align: center;
        }

        .stat-item h3 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .stat-item p {
            color: #fff;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        .content-section {
            padding: 4rem 0;
        }

        .scroll-container {
            display: flex;
            overflow-x: auto;
            gap: 1.5rem;
            padding-bottom: 1rem;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) #222;
        }

        .scroll-container::-webkit-scrollbar {
            height: 6px;
        }
        .scroll-container::-webkit-scrollbar-track {
            background: #222;
        }
        .scroll-container::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 3px;
        }

        .card-mini {
            min-width: 280px;
            background: var(--card-bg);
            border-radius: var(--radius-md);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .card-mini h4 {
            color: #fff;
            margin-bottom: 0.5rem;
        }
        
        .card-mini p {
            font-size: 0.9rem;
            color: #aaa;
        }

        .welcome-btn-container {
            text-align: center;
            padding: 4rem 0;
            background: linear-gradient(180deg, transparent 0%, rgba(212, 175, 55, 0.05) 100%);
        }

        .pulse-btn {
            animation: pulse-shadow 2s infinite;
        }

        /* Clear Section Separators */
        .section-separator {
            padding: 4rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .bg-darker { background-color: #050505; }
        .bg-lighter { background-color: #121212; }

        .section-title {
            font-size: 2rem;
            margin-bottom: 2rem;
            position: relative;
            padding-left: 20px;
            border-left: 5px solid var(--primary-color);
        }

        /* Carousel Styles Updated */
        .carousel-view {
            overflow: hidden;
            width: 100%;
        }

        .carousel-track {
            display: flex;
            transition: transform 0.5s ease-out;
            gap: 20px; /* Space between slides */
            padding: 20px 0; /* Space for shadow/hover effects */
        }

        .carousel-slide {
            flex-shrink: 0;
            position: relative;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            transition: transform 0.3s;
            /* width is set via JS */
        }

        .carousel-slide:hover {
            transform: translateY(-5px);
        }

        .carousel-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .carousel-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 1rem;
        }

        .slide-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(0deg, #000 0%, rgba(0,0,0,0.9) 30%, transparent 100%);
            padding: 1.5rem;
            color: white;
            pointer-events: none;
        }

        /* Portrait styling override removal - fully handled by JS sizing now */
        #events-carousel { aspect-ratio: auto; max-width: none; }
        
        /* Info Grid Styles (Text Heavy) */
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }
        @media (max-width: 768px) {
             .info-grid { grid-template-columns: 1fr; gap: 2rem; }
        }

        .info-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--primary-color);
            position: relative;
        }
        .info-card h4 { color: var(--primary-color); font-size: 1.3rem; margin-bottom: 0.5rem; }
        .info-card p { color: #d0d0d0; line-height: 1.5; font-size: 1rem; }
        .info-card .meta { display: block; margin-top: 1rem; font-size: 0.85rem; color: #888; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }

        .promo-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .promo-item:last-child { border-bottom: none; }
        .promo-icon { font-size: 1.5rem; color: var(--secondary-color); min-width: 40px; text-align: center; }

        /* Mobile Optimization */
        @media (max-width: 768px) {
            .section-separator {
                padding: 2rem 0;
            }
            .section-title {
                font-size: 1.6rem;
                margin-bottom: 1.5rem;
            }
            .welcome-hero {
                height: 45vh;
                min-height: 300px; 
            }
            .stat-item h3 {
                font-size: 2rem;
            }
            .carousel-dot {
                width: 12px; /* Bigger touch target */
                height: 12px;
                margin: 0 4px;
            }
            .carousel-dot.active {
                width: 25px;
            }
            /* Ensure cards take full width nicely */
            .carousel-container, .carousel-view {
                margin: 1rem 0;
            }
        }
    </style>
</head>
<body>

    <header class="welcome-hero">
        <img id="header-logo" alt="Logo" style="position: absolute; top: 1.5rem; left: 50%; transform: translateX(-50%); width: 100px; height: auto; z-index: 5;">
        
        <div class="container welcome-content">
            <span style="color: var(--primary-color); letter-spacing: 2px; text-transform: uppercase; font-weight: 700; font-size: 0.9rem;">Est√°s conectado en</span>
            <h1 style="margin-bottom: 0; font-size: 2.5rem; line-height: 1.1;">Casino Gualeguaych√∫</h1>
        </div>
    </header>

    <!-- AREA 1: SHOWS & ENTRETENIMIENTO -->
    <section class="section-separator bg-darker">
        <div class="container">
            <h2 class="section-title">Shows & Espect√°culos</h2>
            <p style="color:#aaa; margin-bottom: 1.5rem; margin-top: -1rem; padding-left: 20px; font-size: 0.95rem;">Los mejores artistas en vivo.</p>
            
            <!-- Reservation Button (Hidden by default, shown via JS) -->
            <div style="padding-left: 20px; margin-bottom: 1.5rem; margin-top: -1rem;">
                <a id="show-reservation-link" href="#" target="_blank" style="display:none; background:#25D366; color:white; font-weight:bold; font-size:0.9rem; padding: 8px 16px; border-radius:20px; text-decoration:none; align-items:center; width:fit-content; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
                    <span style="font-size:1.1rem; margin-right:5px;">üì±</span> Reservar Lugar
                </a>
            </div>
            
            <div id="events-carousel" class="carousel-view">
                <div class="carousel-track"></div>
            </div>
            <div class="carousel-nav" id="events-nav"></div>

            <div style="margin-top: 4rem;"></div>

            <!-- 2. INFO & LOCATION -->
            <h2 class="section-title">Informaci√≥n</h2>
            <div class="info-grid" style="grid-template-columns: 1fr; margin-bottom: 3rem;">
                 <!-- General Info (Full width or contained) -->
                <div>
                    <h3 style="margin-bottom: 1rem; color: #fff; font-size: 1.4rem;">üìç Vis√≠tanos</h3>
                    <div class="info-card">
                        <p id="info-address" style="font-size: 1.1rem; color: white; margin-bottom: 0.5rem;">Cargando direcci√≥n...</p>
                        <p id="info-hours" style="color: var(--primary-color); font-weight: bold;">...</p>
                        
                        <div class="stat-mini-row" style="display: flex; gap: 2rem; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
                            <div>
                                <span id="info-machines" style="font-size:1.8rem; color:white; font-weight:900; line-height: 1;">-</span>
                                <span style="display:block; font-size:0.8rem; color:#888; text-transform: uppercase;">Slots</span>
                            </div>
                             <div>
                                <span id="info-roulettes" style="font-size:1.8rem; color:white; font-weight:900; line-height: 1;">-</span>
                                <span style="display:block; font-size:0.8rem; color:#888; text-transform: uppercase;">Ruletas</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. GALLERY (Visual Break) -->
            <div style="margin: 3rem 0;">
                <h3 style="margin-bottom: 1.5rem; color: #fff; font-size: 1.4rem; padding-left: 10px; border-left: 3px solid #fff;">üì∏ Nuestras Salas</h3>
                <div id="gallery-carousel" class="carousel-view">
                    <div class="carousel-track"></div>
                </div>
                <div class="carousel-nav" id="gallery-nav"></div>
            </div>

            <!-- 4. PROMOS & SORTEOS (Text Heavy) -->
            <div class="info-grid" style="margin-top: 3rem;">
                
                <!-- Sorteos -->
                <div>
                    <h3 style="margin-bottom: 1.5rem; color: #fff; font-size: 1.4rem;">üèÜ Sorteos Vigentes</h3>
                    <div id="raffles-carousel" class="carousel-view">
                        <div class="carousel-track"></div>
                    </div>
                    <div class="carousel-nav" id="raffles-nav"></div>
                </div>

                <!-- Promos -->
                <div>
                    <h3 style="margin-bottom: 1.5rem; color: #fff; font-size: 1.4rem;">‚ö° Promociones</h3>
                    <div id="promos-carousel" class="carousel-view">
                        <div class="carousel-track"></div>
                    </div>
                    <div class="carousel-nav" id="promos-nav"></div>
                </div>

            </div>

        </div>
    </section>

    <!-- AREA 4: RESTAURANT -->
    <section class="section-separator bg-lighter">
        <div class="container">
            <h2 class="section-title">Bar & Gastronom√≠a</h2>
            <div id="menu-carousel" class="carousel-view">
                <div class="carousel-track"></div>
            </div>
            <div class="carousel-nav" id="menu-nav"></div>
            
            <div style="text-align: center; margin-top: 2rem;">
                <a href="menu-gualeguaychu.html" class="btn btn-secondary">VER CARTA COMPLETA</a>
            </div>
        </div>
    </section>

    <!-- <div class="welcome-btn-container">
        <h2 style="margin-bottom: 2rem; font-size: 1.5rem;">Descubre todo lo que tenemos para vos</h2>
        <a href="casino-gualeguaychu.html" class="btn pulse-btn" style="padding: 18px 30px; font-size: 1.1rem; width: 90%;">IR AL SITIO COMPLETO</a>
        <br>
        <a href="index.html" style="display: inline-block; margin-top: 1.5rem; color: #666; font-size: 0.9rem; text-decoration: underline;">Volver al inicio de Euforia</a>
    </div> -->

    <script>
        // Info Header - Updated to target new Info Grid elements
        fetch('gualeguaychu/info.json')
        .then(r => r.json())
        .then(data => {
            document.getElementById('info-address').textContent = data.direccion;
            document.getElementById('info-hours').textContent = data.horarios;
            document.getElementById('info-machines').textContent = data.cantidad_maquinas;
            document.getElementById('info-roulettes').textContent = data.cantidad_ruletas;

            // Set Logo from Config
            if(data.logo) {
                document.getElementById('header-logo').src = data.logo;
            }

            // Set Hero Image
            if(data.hero_imagen) {
                document.querySelector('.welcome-hero').style.backgroundImage = `url('${data.hero_imagen}')`;
            }

            // WhatsApp Reservation Link
            const reserveBtn = document.getElementById('show-reservation-link');
            if(data.numero && reserveBtn) {
                // The JSON already contains the full URL
                reserveBtn.href = data.numero; 
                reserveBtn.style.display = 'inline-flex';
            }
        });

        /**
         * Enhanced Carousel Function
         * @param {string} containerId - The ID of the container div
         * @param {string} navId - The ID of the nav div
         * @param {Array} data - Array of data items
         * @param {Function} renderContent - Function returning HTML string for slide content
         * @param {Object} options - { itemsPerView: number, aspectRatio: string }
         */
        function initMultiCarousel(containerId, navId, data, renderContent, options = {}) {
            const container = document.getElementById(containerId);
            const navContainer = document.getElementById(navId);
            if (!container || !data || data.length === 0) return;

            const track = container.querySelector('.carousel-track');
            
            // Mobile Optimization: Strict 1 item per view on mobile
            const isMobile = window.innerWidth < 768;
            const itemsPerView = isMobile ? 1 : (options.itemsPerView || 1);
            const gap = 20;
            
            // Calculate width based on items per view
            // Using calc to account for gaps: (100% - totalGaps) / itemsPerView
            // For simplicity in JS we'll let CSS handle gap and set flex-basis.
            
            data.forEach((item, index) => {
                const slide = document.createElement('div');
                slide.className = 'carousel-slide';
                
                // Style Adjustments
                slide.style.width = `calc((100% - ${(itemsPerView - 1) * gap}px) / ${itemsPerView})`;
                if(options.aspectRatio) slide.style.aspectRatio = options.aspectRatio;

                slide.innerHTML = renderContent(item);
                track.appendChild(slide);

                // Dots (only 1 per group if multiple items, simplified to 1 per item for now)
                if (index <= data.length - itemsPerView) {
                     const dot = document.createElement('div');
                    dot.className = index === 0 ? 'carousel-dot active' : 'carousel-dot';
                    dot.addEventListener('click', () => scrollToSlide(index));
                    navContainer.appendChild(dot);
                }
            });

            // Logic
            let currentIndex = 0;
            const maxIndex = data.length - Math.floor(itemsPerView);

            function scrollToSlide(index) {
                if (index < 0) index = 0;
                if (index > maxIndex) index = 0; // Loop back
                currentIndex = index;

                // Calculate translate distance
                // slideWidth + gap
                const slideWidthPct = 100 / itemsPerView; 
                // We drag by percentage relative to track? No, simpler to scroll item by item
                // Let's use flexible calculation
                const itemWidth = track.children[0].offsetWidth;
                const moveAmount = (itemWidth + gap) * currentIndex;
                
                track.style.transform = `translateX(-${moveAmount}px)`;

                // Update dots
                const dots = navContainer.querySelectorAll('.carousel-dot');
                dots.forEach((d, i) => {
                    d.className = i === currentIndex ? 'carousel-dot active' : 'carousel-dot';
                });
            }

            // Touch Support (Swipe)
            let touchStartX = 0;
            let touchEndX = 0;

            container.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
            }, {passive: true});

            container.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, {passive: true});

            function handleSwipe() {
                if (touchEndX < touchStartX - 50) {
                    // Swiped Left -> Next Slide
                    scrollToSlide(currentIndex + 1);
                }
                if (touchEndX > touchStartX + 50) {
                    // Swiped Right -> Prev Slide
                    scrollToSlide(currentIndex - 1);
                }
            }
            
            // Auto Play
            setInterval(() => {
                scrollToSlide(currentIndex + 1);
            }, options.interval || 7000);
        }

        document.addEventListener('DOMContentLoaded', () => {
            
            // 1. SHOWS: 2.5 items per view on desktop (showing previews of adjacent cards)
            fetch('gualeguaychu/eventos.json').then(r => r.json()).then(data => {
                initMultiCarousel('events-carousel', 'events-nav', data, (item) => `
                    <img src="${item.imagen}" alt="${item.artista}">
                    <div class="slide-caption">
                        <h4 style="margin:0; font-size:1.1rem; color:var(--primary-color)">${item.artista}</h4>
                        <small style="color:#fff; font-weight:bold;">${item.fecha}</small>
                    </div>
                `, { itemsPerView: 2.2, aspectRatio: '4/5' });
            });

            // 2. GALLERY: 2.2 items (Portrait Mode for Mobile Images)
            fetch('gualeguaychu/galeria.json').then(r => r.json()).then(data => {
                initMultiCarousel('gallery-carousel', 'gallery-nav', data, (item) => `
                    <img src="${item.src}" alt="Sala" style="filter: brightness(0.85);">
                `, { itemsPerView: 2.2, aspectRatio: '4/5' });
            });

            // 3. SORTEOS: Render as CAROUSEL
            fetch('gualeguaychu/sorteos.json').then(r => r.json()).then(data => {
                initMultiCarousel('raffles-carousel', 'raffles-nav', data, (item) => `
                    <div style="background:rgba(255,255,255,0.05); border-radius:12px; height:100%; border:1px solid rgba(255,255,255,0.1); overflow:hidden; display:flex; flex-direction:column;">
                        <div style="height:220px; overflow:hidden;">
                            ${item.imagen ? `<img src="${item.imagen}" style="width:100%; height:100%; object-fit:cover;">` : ''}
                        </div>
                        <div style="padding:1rem; flex-grow:1; display:flex; flex-direction:column;">
                            <h4 style="margin:0 0 0.5rem 0; font-size:1.1rem; color:var(--secondary-color)">${item.premio}</h4>
                            <p style="font-size:0.9rem; color:#ccc; line-height:1.4; margin-bottom:0.5rem; flex-grow:1;">${item.condicion}</p>
                            <span style="font-size:0.85rem; color:#888; font-weight:bold; text-transform:uppercase;">üìÖ ${item.fecha}</span>
                        </div>
                    </div>
                `, { itemsPerView: 1 });
            });

            // 4. PROMOS: Render as CAROUSEL
            fetch('gualeguaychu/promos_casino.json').then(r => r.json()).then(data => {
                // Use carousel instead of list
                 initMultiCarousel('promos-carousel', 'promos-nav', data, (item) => `
                    <div style="background:rgba(255,255,255,0.05); border-radius:12px; height:100%; border:1px solid rgba(255,255,255,0.1); overflow:hidden; display:flex; flex-direction:column;">
                        <div style="height:220px; overflow:hidden;">
                            ${item.imagen ? `<img src="${item.imagen}" style="width:100%; height:100%; object-fit:cover;">` : `<div style="width:100%; height:100%; background:#222; display:flex; align-items:center; justify-content:center; font-size:2rem;">üéÅ</div>`}
                        </div>
                        <div style="padding:1rem; flex-grow:1; display:flex; flex-direction:column;">
                            <h4 style="margin:0 0 0.5rem 0; font-size:1.1rem; color:var(--primary-color)">${item.titulo}</h4>
                            <p style="font-size:0.9rem; color:#ccc; line-height:1.4; margin-bottom:0.5rem; flex-grow:1;">${item.descripcion}</p>
                            <small style="font-weight:bold; color:#fff;">${item.dias}</small>
                        </div>
                    </div>
                `, { itemsPerView: 1 }); // 1 item per view in this column seems best as it's already narrow
            });

            // 5. MENU: 2.5 items
            fetch('gualeguaychu/promos_bar.json').then(r => r.json()).then(data => {
                initMultiCarousel('menu-carousel', 'menu-nav', data, (item) => `
                    <img src="${item.imagen}">
                    <div class="slide-caption">
                         <div style="display:flex; justify-content:space-between;">
                            <span style="font-weight:bold; color:var(--primary-color)">${item.nombre}</span>
                            <span style="background:var(--primary-color); color:black; padding:0 4px; font-weight:bold; border-radius:4px;">${item.precio}</span>
                        </div>
                    </div>
                `, { itemsPerView: 3, aspectRatio: '4/3' });
            });

        });
    </script>
</body>
</html>
